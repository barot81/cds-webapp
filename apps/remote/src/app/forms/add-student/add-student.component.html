<form class="drawer-p" name="form" [formGroup]="fusionFormGroup">
  <mat-card fxLayout="column" class="p-16">
    <div fxLayout="row" fxLayoutAlign="space-between end">
      <mat-form-field appearance="fill" fxFlex="100">
        <mat-label>First name</mat-label>
        <input matInput noWhitespace formControlName="firstName" required />
      </mat-form-field>
    </div>

    <div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">
      <mat-form-field appearance="fill" fxFlex="100">
        <mat-label>Last name</mat-label>
        <input matInput noWhitespace formControlName="lastName" required />
      </mat-form-field>
    </div>

    <div formGroupName="enrollment" fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">
      <mat-form-field appearance="fill" fxFlex="100">
        <mat-label>Student ID</mat-label>
        <input matInput noWhitespace formControlName="studentNumber" />
      </mat-form-field>
    </div>

    <div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">
      <mat-form-field appearance="fill" fxFlex="100">
        <mat-label>School email address</mat-label>
        <input matInput noWhitespace formControlName="email" required />
      </mat-form-field>
    </div>

    <div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">
      <mat-form-field appearance="fill" fxFlex="100">
        <mat-label>Cell phone</mat-label>
        <input matInput noWhitespace formControlName="phone" [textMask]="{ mask: mask, guide: false }" />
      </mat-form-field>
    </div>

    <div fxLayout="row wrap" fxLayoutAlign="start center" fxFlex="1 0 auto">
      <mat-form-field appearance="fill" fxFlex="100">
        <mat-label>Date of Birth</mat-label>
        <input readonly matInput [matDatepicker]="picker2" (click)="picker2.open()" [max]="maxDate"
          formControlName="dateOfBirth" />
        <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
        <mat-datepicker #picker2 color="primary" class="action-icon"></mat-datepicker>
      </mat-form-field>
    </div>

    <div formGroupName="enrollment" fxLayout="row wrap" fxLayoutAlign="start center" fxFlex="1 0 auto">
      <mat-form-field appearance="fill" fxFlex="100">
        <mat-label>Cohort</mat-label>
        <mat-select formControlName="cohortId" (selectionChange)="OnCohortSelecect($event)" required>
          <mat-option *ngFor="let cohort of cohortList" 
          [ngClass]="{'mat-option-text ': isOptionTruncated(cohort.id)
          }" id={{cohort.id}} [value]="cohort.id" class="dropdown-with-tooltip" [options]="tooltipOptions"
          [display]="isOptionTruncated(cohort.id)"
          [tooltip]="cohort.cohortName">
          {{cohort.cohortName}}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <div formGroupName="enrollment" fxLayout="row wrap" fxLayoutAlign="start center" fxFlex="1 0 auto">
      <mat-form-field appearance="fill" fxFlex="100">
        <mat-label>Group</mat-label>
        <mat-select formControlName="groupName">
          <mat-option *ngFor="let group of selectedcohort?.group" [ngClass]="{'mat-option-text ': isOptionTruncated(group)
        }" id={{group}} [value]="group" class="dropdown-with-tooltip" [options]="tooltipOptions"
        [display]="isOptionTruncated(group)"
        [tooltip]="group">
             {{ group }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <div formGroupName="enrollment" fxLayout="row wrap" fxLayoutAlign="start center" fxFlex="1 0 auto">
      <mat-form-field appearance="fill" fxFlex="100">
        <mat-label>Enrollment calendar</mat-label>
        <mat-select formControlName="enrollmentTermId" (selectionChange)="OnValueSelect($event, 'enrollmentTerm', 'enrollmentTermDate')">
          <mat-option *ngFor="let enroll of enrollmentTermLookup?.enrollmentTerms"  [ngClass]="{'mat-option-text ': isOptionTruncated(enroll.id)
        }" id={{enroll.id}} [value]="enroll.id" class="dropdown-with-tooltip" [options]="tooltipOptions"
        [display]="isOptionTruncated(enroll.id)"
        [tooltip]="enroll.name">
            {{ enroll.name }}&nbsp;<span *ngIf="enroll?.termDate">({{ enroll.termDate | date: 'MMMM d, y'}})</span>
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <div formGroupName="enrollment" fxLayout="row wrap" fxLayoutAlign="start center" fxFlex="1 0 auto">
      <mat-form-field appearance="fill" fxFlex="100">
        <mat-label>Graduation calendar</mat-label>
        <mat-select formControlName="graduationTermId" (selectionChange)="OnValueSelect($event, 'graduationTerm', 'graduationTermDate')">
          <mat-option *ngFor="let grad of graduationTermLookup?.graduationTerms" [ngClass]="{'mat-option-text ': isOptionTruncated(grad.id)
        }" id={{grad.id}} [value]="grad.id" class="dropdown-with-tooltip" [options]="tooltipOptions"
        [display]="isOptionTruncated(grad.id)"
        [tooltip]="grad.name">
            {{ grad.name }}&nbsp;<span *ngIf="grad?.termDate">({{ grad.termDate | date: 'MMMM d, y'}})</span>
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <div formGroupName="enrollment" fxLayout="row wrap" fxLayoutAlign="start center" fxFlex="1 0 auto">
      <mat-form-field appearance="fill" fxFlex="100">
        <mat-label>Student category</mat-label>
        <mat-select formControlName="categoryId" (selectionChange)="OnValueSelect($event, 'category')">
          <mat-option *ngFor="let category of categoryLookup?.categories" [ngClass]="{'mat-option-text ': isOptionTruncated(category.id)
        }" id={{category.id}} [value]="category.id" class="dropdown-with-tooltip" [options]="tooltipOptions"
        [display]="isOptionTruncated(category.id)"
        [tooltip]="category.id">
              {{ category.name }}
            </mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <div formGroupName="enrollment" fxLayout="row wrap" fxLayoutAlign="start center" fxFlex="1 0 auto">
      <mat-form-field appearance="fill" fxFlex="100">
        <mat-label>Campus</mat-label>
        <mat-select formControlName="campusId" (selectionChange)="OnValueSelect($event, 'campus')">
          <mat-option *ngFor="let campus of campusLookup?.campuses" [ngClass]="{'mat-option-text ': isOptionTruncated(campus.id)
        }" id={{campus.id}} [value]="campus.id" class="dropdown-with-tooltip" [options]="tooltipOptions"
        [display]="isOptionTruncated(campus.id)"
        [tooltip]="campus.name" >          
              {{ campus.name }}
            </mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <div formGroupName="associatedFaculties" fxLayout="row wrap" fxLayoutAlign="start center" fxFlex="1 0 auto">
      <mat-form-field appearance="fill" fxFlex="100">
        <mat-label>Associated staff and faculty</mat-label>
        <mat-select formControlName="faculty" (selectionChange)="onFacultyChange($event)">
          <mat-option *ngFor="let item of associatedFacultyList" [value]="item">
            {{ item.firstName + ' ' + item.lastName }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <div *ngIf="facultySelected" formGroupName="associatedFaculties" fxLayout="row wrap" fxLayoutAlign="start center"
      fxFlex="1 0 auto">
      <mat-form-field appearance="fill" fxFlex="100">
        <mat-label>Role</mat-label>
        <mat-select formControlName="relationShip">
          <mat-option *ngFor="let role of 'facultyrole' | lookups" [value]="role.itemId">
            {{ role.itemId }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>
  </mat-card>
</form>