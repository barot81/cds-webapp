<div class="page-layout simple fullwidth full-width-page">
  <div class="center pl-0 pr-0">
    <div class="gray-header">
      <div fxLayout="row wrap" fxLayoutAlign="space-between center">
        <div fxLayout="row" fxLayoutAlign="start center">
          <div class="mr-8">
            <button
              mat-icon-button
              aria-label="Click to go back"
              class="action-icon mx-8"
              routerLink="/admin/ux/ui/zhealthcare-component-library"
            >
              <i aria-hidden="true" class="fa-light fa-arrow-left-long"></i>
            </button>
          </div>
          <div>
            <span class="font-16 font-weight-600">Filter Drawer Example</span>
          </div>
        </div>
        <div fxLayout="row" fxLayoutAlign="end center">
          <fuse-theme-options [view]="'toggle'"></fuse-theme-options>
        </div>
      </div>
    </div>

    <div class="content mt-16">
      <div fxLayout="column" fxLayout.gt-md="row">
        <div
          class="preview mr-md-16 mb-16"
          fxLayout="column"
          fxLayoutAlign="start"
          fxFlex="50"
        >
          <mat-card class="mr-16">
            <button
              mat-icon-button
              class="ml-4 filter-icon-button"
              aria-label="filters"
              zhealthcareDrawerAction
              [componentSelector]="
                _zhealthcareDrawerFormService.get('ryzen-drawer-filter-example-one')
              "
              [size]="'drawer-md'"
              [caption]="'Filters'"
              [primaryAction]="'Apply'"
            >
              <div fxLayout="row" fxLayoutAlign="start center">
                <i aria-hidden="true" class="fal fa-filter s-18 mr-4"></i>
                <span class="warn-fg"> 12 </span>
              </div>
            </button>
          </mat-card>
        </div>

        <div
          class="preview"
          fxLayout="column"
          fxLayoutAlign="start"
          fxFlex="50"
        >
          <mat-tab-group>
            <mat-tab label="Parent HTML">
              <fuse-highlight
                lang="html"
                class="source-code mt-16"
                fxLayout="column"
                fxLayoutAlign="center"
              >
                <textarea #source hidden="hidden">
 
                    <button
                    mat-icon-button
                    class="ml-4 filter-icon-button"
                    aria-label="filters"
                    zhealthcareDrawerAction
                    [componentSelector]="
                      _zhealthcareDrawerFormService.get('ryzen-drawer-filter-example-one')
                    "
                    [size]="'drawer-md'"
                    [caption]="'Filters'"
                    [primaryAction]="'Apply'"
                    >
                    <div fxLayout="row" fxLayoutAlign="start center">
                      <i aria-hidden="true" class="fal fa-filter s-18 mr-4"></i>
                      <span class="warn-fg"> 12 </span>
                    </div>
                    </button>
                  
                </textarea>
              </fuse-highlight>
            </mat-tab>
            <mat-tab label="Parent TS">
              <fuse-highlight
                lang="ts"
                class="source-code mt-16"
                fxLayout="column"
                fxLayoutAlign="center"
              >
                <textarea #source hidden="hidden">
 
                    import { Component } from '@angular/core';
                    import { zhealthcareDrawerFormService } from '../../../zhealthcare-drawers/zhealthcare-drawer-forms-shared.service';

                    @Component({
                    selector: 'zhealthcare-filter-example',
                    templateUrl: './filter-example.component.html',
                    })
                    export class FilterExampleComponent {
                    constructor(public _zhealthcareDrawerFormService: zhealthcareDrawerFormService) {}
                    }
                </textarea>
              </fuse-highlight>
            </mat-tab>
            <mat-tab label="Drawer HTML">
              <fuse-highlight
                lang="html"
                class="source-code mt-16"
                fxLayout="column"
                fxLayoutAlign="center"
              >
                <textarea #source hidden="hidden">
 
                    <div class="h-100-p" fxLayout="column">
                      <div fxHide.gt-md>
                        <div class="my-16 pl-16">
                         <button class="link-btn pl-0 py-0" aria-label="Reset all">
                            Reset all
                          </button>
                        </div>
                        <div>
                          <nav mat-tab-nav-bar>
                            <a
                              mat-tab-link
                              *ngFor="let item of filterList"
                              [active]="item.id === selectedId"
                              (click)="navigateToFilterListItem(item.id)">
                              <span> item.title <span *ngIf="item.count > 0">( item.count )</span></span>
                            </a>
                          </nav>
                        </div>
                      </div>

                      <div fxLayout="row" fxFlex="100" class="h-100-p">
                        <div
                          fxHide.lt-lg
                          class="white-background pt-16 overflow-auto box-shadow-right"
                          fxFlex.gt-md="30">
                          <div class="mb-16 pl-16">
                            <button class="link-btn pl-0 py-0" aria-label="Reset all">
                              Reset all
                            </button>
                          </div>
                          <mat-list>
                            <button
                              mat-button
                              *ngFor="let item of filterList; let i = index"
                              (click)="navigateToFilterListItem(item.id)">
                              <mat-list-item
                                [ngClass]="{ 'active-list-item': selectedId === item.id }">
                                <div
                                  fxLayout="row"
                                  fxLayoutAlign="space-between center"
                                  class="w-100-p">
                                  <div
                                    class="text-left white-space-normal"
                                    fxLayout="row"
                                    fxLayoutAlign="start center">
                                    <span> item.title <span *ngIf="item.count > 0">( item.count )</span></span>
                                  </div>
                                  <div fxLayout="row" fxLayoutAlign="end center">
                                    <i aria-hidden="true" class="fa-solid fa-circle warn-fg s-8"></i>
                                  </div>
                                </div>
                              </mat-list-item>
                            </button>
                          </mat-list>
                        </div>
                        <div fxFlex.gt-md="70" fxFlex="100" class="pl-16 overflow-auto" role="main">
                          <div *ngIf="selectedId === filterList[0].id">
                            <div fxFlex="100" fxLayout="column" class="word-break-word pt-16">
                              <div class="mb-12" fxLayout="row">
                                <div>
                                  <button
                                    *ngIf="selectedStatus.length !== settings?.length"
                                    (click)="selectAll('setting')"
                                    class="link-btn pl-0 py-0"
                                    aria-label="Select all">
                                    Select all
                                  </button>
                                  <button
                                    *ngIf="
                                      selectedStatus.length === settings?.length &&
                                      selectedStatus.length > 0
                                    "
                                    (click)="reset('setting')"
                                    class="link-btn pl-0 py-0"
                                    aria-label="Clear all">
                                    Clear all
                                  </button>
                                </div>
                                <div class="ml-24">
                                  <button
                                    *ngIf="
                                      selectedStatus.length > 0 &&
                                      selectedStatus.length !== settings?.length
                                    "
                                    (click)="unselect('setting')"
                                    class="link-btn pl-0 py-0"
                                    aria-label="Select all">
                                    Unselect( selectedStatus.length )
                                  </button>
                                </div>
                              </div>
                              <div fxLayout="column">
                                <mat-checkbox
                                  fxLayout="row"
                                  fxFlex="100"
                                  class="mb-16"
                                  *ngFor="let option of settings"
                                  [checked]="isStatusChecked(option.id)"
                                  [value]="option.id"
                                  (change)="selectSetting($event, option.id)"
                                >
                                  <div class="status-badge  option.id  ">
                                     option.title 
                                  </div>
                                </mat-checkbox>
                              </div>
                            </div>
                          </div>
                          <div *ngIf="selectedId === filterList[1].id">
                            <div
                              fxFlex="100"
                              fxLayout="column"
                              class="word-break-word pr-md-16 pt-16"
                            >
                              <div
                                class="mb-12"
                                fxLayout="row"
                                fxLayoutAlign="space-between center"
                              >
                                <button
                                  (click)="clearSelected()"
                                  class="link-btn pl-0 py-0"
                                  aria-label="Clear"
                                  [disabled]="selectedCohort === ''"
                                >
                                  Clear
                                </button>
                              </div>

                              <mat-radio-group fxLayout="column" [(ngModel)]="selectedCohort">
                                <mat-radio-button
                                  [checked]="isCohortChecked(option.id)"
                                  (change)="changeCohoort(option.id)"
                                  *ngFor="let option of cohorts"
                                  [value]="option.id"
                                  class="mb-16 mat-radio-button-break"
                                >
                                   option.title 
                                </mat-radio-button>
                              </mat-radio-group>
                            </div>
                          </div>
                          <div *ngIf="selectedId === filterList[2].id">
                            <div
                              fxFlex="100"
                              fxLayout="column"
                              class="word-break-word pr-md-16 pt-16"
                            >
                              <div class="search-wrapper" search [formControl]="searchItem">
                                <div
                                  class="search"
                                  fxFlex
                                  fxLayout="row"
                                  fxLayoutAlign="start center"
                                >
                                  <i aria-hidden="true" class="fa-light fa-magnifying-glass s-18 mr-4"></i>

                                  <input
                                    id="inputBox"
                                    type="text"
                                    placeholder="Search"
                                    [formControl]="searchItem"
                                    fxFlex
                                  />

                                  <button
                                    mat-icon-button
                                    aria-label="clear search"
                                    class="action-icon clear-button"
                                  >
                                    <i aria-hidden="true" class="fa-light fa-xmark s-18"></i>
                                  </button>
                                </div>
                              </div>
                              <div
                                fxFlex="100"
                                fxLayout="column"
                                class="word-break-word mt-16 mb-12"
                              >
                                <div class="mb-12" fxLayout="row">
                                  <div>
                                    <button
                                      *ngIf="selectedDocument.length !== documents?.length"
                                      (click)="selectAll('document')"
                                      class="link-btn pl-0 py-0"
                                      aria-label="Select all"
                                    >
                                      Select all
                                    </button>
                                    <button
                                      *ngIf="
                                        selectedDocument.length === documents?.length &&
                                        selectedDocument.length > 0
                                      "
                                      (click)="reset('document')"
                                      class="link-btn pl-0 py-0"
                                      aria-label="Clear all"
                                    >
                                      Clear all
                                    </button>
                                  </div>
                                  <div class="ml-24">
                                    <button
                                      *ngIf="
                                        selectedDocument.length > 0 &&
                                        selectedDocument.length !== documents?.length
                                      "
                                      (click)="unselect('document')"
                                      class="link-btn pl-0 py-0"
                                      aria-label="Unselect"
                                    >
                                      Unselect( selectedDocument.length )
                                    </button>
                                  </div>
                                </div>
                                <div fxLayout="column">
                                  <mat-checkbox
                                    fxLayout="row"
                                    fxFlex="100"
                                    class="mb-16"
                                    *ngFor="let option of documents"
                                    [checked]="isDocumentChecked(option.id)"
                                    [value]="option.id"
                                    (change)="selectDocument($event, option.id)"
                                  >
                                     option.title 
                                  </mat-checkbox>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>

                      
                </textarea>
              </fuse-highlight>
            </mat-tab>
            <mat-tab label="Drawer TS">
              <fuse-highlight
                lang="ts"
                class="source-code mt-16"
                fxLayout="column"
                fxLayoutAlign="center"
              >
                <textarea #source hidden="hidden">
 
                  import { Component } from '@angular/core';
                  import { FormControl } from '@angular/forms';
                  import { zhealthcareTag, TagView } from '@zhealthcare/plugin';
                  import { SidebarFocusHelper } from '../../../ui/zhealthcare-sidebar/zhealthcare-sidebar.service';

                  export interface filterListItem {
                    id: string;
                    title: string;
                    count: number;
                  }

                  export interface statusBadge {
                    id: string;
                    title: string;
                  }

                  @Component({
                    selector: 'ryzen-filter-drawer',
                    templateUrl: './filter-drawer.component.html'
                  })
                  export class FilterDrawerComponent {
                    tags: Array<zhealthcareTag> = [
                      {
                        id: Math.random(),
                        name: 'Tag with 30 characters allowed',
                        color: 'indigo-500',
                        isChecked: true
                      },
                      {
                        id: Math.random(),
                        name: 'Tag Label 2 1 Tag Lorem i',
                        color: 'deep-orange-500',
                        isChecked: true
                      },
                      {
                        id: Math.random(),
                        name: 'Tag Label 3',
                        color: 'pink-500',
                        isChecked: false
                      },
                      {
                        id: Math.random(),
                        name: 'Tag Label 4 Bigger Text 4',
                        color: 'blue-500',
                        isChecked: true
                      },
                      {
                        id: Math.random(),
                        name: 'Tag Label 5',
                        color: 'gray-500',
                        isChecked: true
                      },
                      {
                        id: Math.random(),
                        name: 'Tag Label 6',
                        color: 'purple-500',
                        isChecked: false
                      },
                      {
                        id: Math.random(),
                        name: 'Tag Label 7 Bigger Text',
                        color: 'yellow-500',
                        isChecked: true
                      },
                      {
                        id: Math.random(),
                        name: 'Tag Label 8 Bigger Text 8 ',
                        color: 'green-500',
                        isChecked: false
                      },
                      {
                        id: Math.random(),
                        name: 'Tag Label 9',
                        color: 'pink-500',
                        isChecked: false
                      },
                      {
                        id: Math.random(),
                        name: 'Tag Label 10 Bigger Text',
                        color: 'indigo-500',
                        isChecked: true
                      }
                    ];

                    selectedStatus = [];
                    selectedCohort = '';
                    selectedDocument = [];

                    getTagTitle(tag: zhealthcareTag): string {
                      if (tag && tag !== null) {
                        return tag.name && tag.name !== null ? tag.name : tag.title;
                      }
                    }

                    getTagColor(tag: zhealthcareTag): string {
                      if (tag && tag !== null) {
                        return tag.color && tag.color !== null ? tag.color : tag.colorCode;
                      }
                    }

                    public tagView = TagView;

                    selectedId: string;

                    searchItem = new FormControl();

                    filterList: filterListItem[] = [
                      { id: 'status-filter', title: 'Status', count: 4 },
                      { id: 'cohort-filter', title: 'Cohort', count: 3 },
                      { id: 'document-type-filter', title: 'Document Type', count: 0 }
                    ];

                    settings: statusBadge[] = [
                      { id: 'pending', title: 'Pending for review' },
                      { id: 'inprogress', title: 'In progress' },
                      { id: 'expiring', title: 'Expiring' },
                      { id: 'getstarted', title: 'Get Started' },
                      { id: 'approved', title: 'Approved' },
                      { id: 'expired', title: 'Expired' }
                    ];

                    cohorts = [
                      { id: '2020', title: 'Cohort 2020' },
                      { id: '2021', title: 'Cohort 2021' },
                      { id: '2022', title: 'Cohort 2022' }
                    ];

                    documents = [
                      { id: 'immunization_summary', title: 'Immunization Summary' },
                      { id: 'flu', title: 'Flu' },
                      { id: 'physical_exam', title: 'Physical Exam' }
                    ];

                    constructor(public _focus: SidebarFocusHelper) {
                      this.selectedId = this.filterList[0].id;
                    }

                    ngOnInit() {
                      this.selectedStatus = [];
                      this.selectedCohort = '';
                      this.selectedDocument = [];
                    }

                    navigateToFilterListItem(id: string) {
                      this._focus.shiftFocus();
                      this.selectedId = id;
                    }

                    isCohortChecked(val: string) {
                      if (this.selectedCohort !== undefined) {
                        if (this.selectedCohort !== undefined && this.selectedCohort === val) {
                          return true;
                        } else {
                          return false;
                        }
                      } else {
                        return false;
                      }
                    }

                    isStatusChecked(val: string) {
                      if (this.selectedStatus !== undefined) {
                        if (this.selectedStatus.find((x) => x === val) !== undefined) {
                          return true;
                        } else {
                          return false;
                        }
                      } else {
                        return false;
                      }
                    }

                    isDocumentChecked(val: string) {
                      if (this.selectedDocument !== undefined) {
                        if (this.selectedDocument.find((x) => x === val) !== undefined) {
                          return true;
                        } else {
                          return false;
                        }
                      } else {
                        return false;
                      }
                    }

                    selectAll(name: string) {
                      if (name === 'setting') {
                        this.selectedStatus = [];
                        this.settings.forEach((tag) => {
                          this.selectedStatus.push(tag.id);
                        });
                      }
                      if (name === 'document') {
                        this.selectedDocument = [];
                        this.documents.forEach((doc) => {
                          this.selectedDocument.push(doc.id);
                        });
                      }
                    }

                    selectSetting(event: any, value: string) {
                      if (event.checked === true) {
                        this.selectedStatus.push(value.trim());
                      }
                      if (event.checked === false) {
                        this.selectedStatus = this.selectedStatus.filter(
                          (x) => x !== value.trim()
                        );
                      }
                    }

                    selectCohort(cohort: string) {
                      if (cohort !== undefined) {
                        this.selectedCohort = cohort;
                      }
                    }

                    selectDocument(event: any, value: string) {
                      if (event.checked === true) {
                        this.selectedDocument.push(value.trim());
                      }
                      if (event.checked === false) {
                        this.selectedDocument = this.selectedDocument.filter(
                          (x) => x !== value.trim()
                        );
                      }
                    }

                    reset(name: string) {
                      if (name === 'setting') {
                        this.selectedStatus = [];
                      }
                      if (name === 'document') {
                        this.selectedDocument = [];
                      }
                    }

                    unselect(name: string) {
                      if (name === 'setting') {
                        this.selectedStatus = [];
                      }
                      if (name === 'document') {
                        this.selectedDocument = [];
                      }
                    }

                    clearSelected() {
                      this.selectedCohort = '';
                    }
                  }

                </textarea>
              </fuse-highlight>
            </mat-tab>
          </mat-tab-group>
        </div>
      </div>
    </div>
  </div>
</div>
