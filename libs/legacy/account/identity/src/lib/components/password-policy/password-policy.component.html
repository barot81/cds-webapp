<div id="login_container" fxLayout="row" fxLayoutAlign="center center" class="margin-auto w-100-p"
    [ngStyle]="{'background' : 'url(assets/images/bg/1.jpg)', 'background-size': 'cover'}">
    <mat-card class="login_screens_container">
        <div fxLayout="column">
            <div fxLayout="column" fxLayoutAlign="start center" fxFlex="100">
                <div class="my-64" fxLayout="row" fxLayoutAlign="center center" fxFlex="100">
                    <img src="assets/images/logo/exxat-pink-large.png" alt="Exxat Logo" width="150px" height="80px">
                </div>
                <div class="w-100-p px-8">
                    <form [formGroup]="loginForm" novalidate class="w-100-p">

                        <div class="text-center mb-16">
                            <span class="font-weight-600 font-18" tabindex="0" aria-label="change password">Change Password</span>
                        </div>
                      
                        <div class="text-center mb-16">
                            <span class="font-weight-600 font-14" tabindex="0"
                                aria-label= "Hi, - Our password policy has updated, please change your">Hi, {{userName}} - Our password policy has updated, please change your
                                password </span>
                        </div>
                      
                        <!-- New Password Field-->
                        <div fxLayout="column" fxLayoutAlign="center">
                            <div fxLayout="row" fxFlex="100">
                                <div fxFlex="90">
                                    <mat-form-field class="w-100-p" appearance="fill">
                                        <mat-label>New Password</mat-label>
                                        <input  [type]="hidePassword ? 'password' : 'text'" matInput #password formControlName="newPassword" name="newPassword" required maxlength="24" (focusout)="matchPassword(loginForm.value)" autocomplete="off"/>
                                        <button type="button" mat-icon-button matSuffix (click)="hidePassword = !hidePassword"
                                        [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hidePassword">
                                        <mat-icon class="icon-fill">{{hidePassword ? 'lock' : 'visibility'}}</mat-icon>
                                      </button>
                                      <mat-hint align="end" aria-live="polite">
                                        {{password.value.length}} / 24
                                      </mat-hint>
                                    </mat-form-field>
                                </div>
                                <div fxFlex="10">
                                    <button mat-icon-button class="mt-4 tooltip-trigger" id="_passwordInfoToolTip"
                                        [tooltip]="password_Info_Content" [options]="tooltipOptions"
                                        (clickOutside)="toolTipOpened.value === true && onOutsideClick()"
                                        (click)="openTooltip('_passwordInfoToolTip')" [exclude]="'tooltip, .tooltip, .tooltip-trigger'"
                                        [excludeBeforeClick]="true">
                                        <i class="fas fa-info-circle icon-fill" aria-hidden="true"></i>
                                    </button>
                                    <ng-template #password_Info_Content>
                                        <div fxLayoutAlign="start" fxLayout="column" class="p-8">
                                            <div class="mb-8">
                                                <span class="font-weight-600" tabindex="0" aria-label="Password guidlines">Password
                                                    guidlines</span>
                                            </div>
                                            <div>
                                                <span tabindex="0" aria-label="1. Password must be minimum 8 characters.">1. Password must
                                                    be minimum 8 characters.</span>
                                            </div>
                                            <div>
                                                <span tabindex="0"
                                                    aria-label="2. Password must contain atleast 1 uppercase letter [A-Z].">2. Password must
                                                    contain atleast 1 uppercase letter
                                                    [A-Z].</span>
                                            </div>
                                            <div>
                                                <span tabindex="0"
                                                    aria-label="3. Password must contain atleast 1 lowercase letter [a-z].">3. Password must
                                                    contain atleast 1 lowercase letter
                                                    [a-z].</span>
                                            </div>
                                            <div>
                                                <span tabindex="0"
                                                    aria-label="4. Password must contain atleast 1 base 10 digit [0-9].">4. Password must contain atleast 1 base 10 digit [0-9].</span>
                                            </div>
                                            <div>
                                                <span tabindex="0" aria-label="5. Password must contain atleast 1 non-alphanumeric character.">5.
                                                    Password must contain atleast 1 non-alphanumeric character.</span>
                                            </div>

                                        </div>
                                    </ng-template>
                                </div>
                            </div>
                        </div>
                        <div fxLayout="column" fxLayoutAlign="center">
                            <div fxLayout="row" fxFlex="100">
                                <div fxFlex="90">
                                <!-- THE PASSWORD STRENGTH COMPONENT -->
                                     <!-- <app-password-strength #passwordComponent [password]="password.value" (onStrengthChanged)= updatedPasswordStrength($event)>
                                    </app-password-strength> -->
                                </div>
                            </div>
                        </div>
                        <!-- Confirm Password Field-->
                        <div fxLayout="column" fxLayoutAlign="center">
                            <div fxLayout="row" fxFlex="100">
                                <div fxFlex="90">
                                    <mat-form-field class="w-100-p" appearance="fill">
                                        <mat-label>Confirm Password</mat-label>
                                        <input matInput 
                                        #reEnterpassword formControlName="confirmPassword" name="confirmPassword" [type]="hideRePassword ? 'password' : 'text'" maxlength="24" required (focusout)="matchPassword(loginForm.value)"/>
                                        <button type="button" mat-icon-button matSuffix (click)="hideRePassword = !hideRePassword"
                                        [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hideRePassword">
                                        <mat-icon class="icon-fill">{{hideRePassword ? 'lock' : 'visibility'}}</mat-icon>
                                      </button>
                                      <mat-hint align="end" aria-live="polite">
                                        {{reEnterpassword.value.length}} / 24
                                      </mat-hint>
                                    </mat-form-field>
                                    <mat-error *ngIf='notSame'>
                                        Password does not match.
                                    </mat-error>
                                    <mat-error *ngIf='!validatePolicy'>
                                        Please check the password guidelines.
                                    </mat-error>
                                </div>
                            </div>
                        </div>
                      
                        <!-- Login Button-->
                        <div fxLayout="row" fxLayoutAlign="end center" class="mt-16">
                            <button mat-raised-button color="primary" class="w-100-p"
                            [disabled]="!loginForm.valid || !isPasswordStrong"  
                            (click)="onClickChangePassword()">
                                <span>Change Password</span>
                            </button>
                        </div>
                      
                      </form>
                    <div class="mt-64" fxLayout="row" fxLayoutAlign="start center">
                        <img src="assets/images/tinfoil_secured.png" alt="Tinfoil Secured" width="80px" height="31px">
                    </div>
                </div>
            </div>
        </div>
    </mat-card>
</div>